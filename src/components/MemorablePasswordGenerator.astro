---
import '../styles/generator-shared.css';
import { getLangFromUrl, useTranslations } from '../i18n/utils';
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<div class='container'>
  <h2>{t('memorable.title')}</h2>

  <div class='password-display'>
    <div id='memorablePasswordList' class='password-list'></div>

    <div class='options'>
      <div class='count-option'>
        <label for='memorablePasswordCount'>
          {t('memorable.count')} : <span id='memorableCountValue'>1</span>
        </label>
        <input
          type='range'
          id='memorablePasswordCount'
          min='1'
          max='10'
          value='1'
        />
      </div>

      <div class='word-option'>
        <label for='numberWordCount'>
          {t('memorable.number')} : <span id='numberWordValue'>4</span>
        </label>
        <input type='range' id='numberWordCount' min='1' max='10' value='4' />
      </div>

      <div class='checkbox-options'>
        <label>
          <input type='checkbox' id='includeNumbers' checked />
          {t('memorable.options.numbers')}
        </label>
        <label>
          <input type='checkbox' id='includeSymbols' checked />
          {t('memorable.options.symbols')}
        </label>
      </div>
    </div>
  </div>

  <div class='strength-meter'>
    <label>{t('password.strength')}</label>
    <span id='memorableStrengthText' class='sr-only' aria-live='polite'></span>
    <div id='strengthMeters' aria-hidden='true'>
      <div class='bar'></div>
      <div class='bar'></div>
      <div class='bar'></div>
      <div class='bar'></div>
    </div>
  </div>

  <button id='generateMemorableButton' class='generate-button'>
    {t('memorable.generate')}
  </button>
</div>

<style>
  .password-list {
    color: var(--color-text-secondary);
  }

  .options {
    margin-top: 0;
  }

  select {
    width: 100%;
    padding: 0.7rem;
    border: none;
    border-radius: 12px;
    background-color: var(--color-bg-primary);
    font-size: 1rem;
    color: var(--color-text-primary);
    cursor: pointer;
    box-shadow: var(--shadow-inset);
    transition: box-shadow 0.3s;
  }

  select:hover {
    box-shadow: var(--shadow-inset-active);
  }

  select:focus {
    box-shadow: var(--shadow-inset-active);
    outline: none;
  }

  .info-box {
    margin-top: 2rem;
    padding: 1.5rem;
    background: var(--color-bg-primary);
    border-radius: 16px;
    border-left: none;
    box-shadow: var(--shadow-inset);
    color: var(--color-text-secondary);
  }

  .info-box h3 {
    color: var(--color-text-primary);
    margin-bottom: 1rem;
  }

  .info-box p {
    margin-bottom: 1rem;
    line-height: 1.5;
  }

  .info-box ul {
    padding-left: 1.5rem;
    margin-bottom: 1rem;
  }

  .info-box li {
    margin-bottom: 0.5rem;
  }

  @media (max-width: 480px) {
    .info-box {
      padding: 1rem;
    }
  }
</style>

<script>
  import('../scripts/memorablePasswordGenerator.js')
    .then(module => {
      const lang = document.documentElement.lang || 'en';
      module.initMemorablePasswordGenerator(lang);
    })
    .catch(error => {
      console.error(error);
    });
</script>
