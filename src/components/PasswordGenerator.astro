---
import '../styles/password.css';
import '../styles/generator-shared.css';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<div class='container'>
  <h2>{t('password.title')}</h2>

  <div class='password-display'>
    <div id='passwordList' class='password-list'>
      <!-- Les mots de passe générés seront ajoutés ici -->
    </div>

    <div class='options'>
      <div class='count-option'>
        <label for='passwordCount'>
          {t('password.count')} : <span id='countValue'>1</span>
        </label>
        <input type='range' id='passwordCount' min='1' max='10' value='1' />
      </div>

      <div class='length-option'>
        <label for='passwordLength'>
          {t('password.length')} : <span id='lengthValue'>16</span>
        </label>
        <input type='range' id='passwordLength' min='8' max='64' value='16' />
      </div>

      <div class='checkbox-options'>
        <label>
          <input type='checkbox' id='uppercase' checked />
          {t('password.options.uppercase')}
        </label>
        <label>
          <input type='checkbox' id='lowercase' checked />
          {t('password.options.lowercase')}
        </label>
        <label>
          <input type='checkbox' id='numbers' checked />
          {t('password.options.numbers')}
        </label>
        <label>
          <input type='checkbox' id='symbols' checked />
          {t('password.options.symbols')}
        </label>
      </div>
    </div>
  </div>

  <div class='strength-meter'>
    <label>{t('password.strength')}</label>
    <span id='strengthText' class='sr-only' aria-live='polite'></span>
    <div class='strength-bars' aria-hidden='true'>
      <div class='bar'></div>
      <div class='bar'></div>
      <div class='bar'></div>
      <div class='bar'></div>
    </div>
  </div>

  <button id='generateButton' class='generate-button'
    >{t('password.generate')}</button
  >
</div>


<script>
  import('../scripts/passwordGenerator.js')
    .then(module => {
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          module.initPasswordGenerator();
        });
      } else {
        module.initPasswordGenerator();
      }
    })
    .catch(error => {
      console.error(error);
    });
</script>
